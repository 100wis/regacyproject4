<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.notice">

<!--페이징해서 공지사항 리스트 가져오기 -->
<select id="getPagingcontents" resultType="NoticeDTO" parameterType="NoticeDTO">
		<![CDATA[
			select *
			from (select ROWNUM as rnum , B.*
			        from(   SELECT  n.*
						    FROM notice n
						    WHERE delete_yn = 'N'
			                ORDER BY fixed_yn desc, noticeid desc) B)C
			where rnum between ${startnum} and ${endnum}
		]]>

	</select>
	
<!--총 게시판 갯수 -->
		<select id="totalcount" resultType="int" >
			select count(*) from notice where delete_yn ='N'
		</select>	
		 
<!--검색 된 총 게시판 갯수 -->
		<select id="Searchtotalcount" resultType="int" parameterType="NoticeDTO">
			select count(*) from notice where delete_yn ='N' and title LIKE concat(concat('%',#{searchTitle}),'%')
		</select>	

<!--페이징해서 검색 된 공지사항 리스트 가져오기 -->		
		<select id="getSearchedList" resultType="NoticeDTO" parameterType="NoticeDTO">
			<![CDATA[
				select *
				from (select ROWNUM as rnum , B.*
				        from(   SELECT  n.*
							    FROM notice n
							    WHERE delete_yn = 'N' and title LIKE concat(concat('%',#{searchTitle}),'%')
				                ORDER BY fixed_yn desc, noticeid desc) B)C
				where rnum between ${startnum} and ${endnum}
			]]>

		</select>
	
<!--공지사항 상세보기-->
		<select id="detail" resultType="NoticeDTO" parameterType="NoticeDTO" >
			select * from notice where noticeid = #{noticeid}
		</select>		
	
	
	
	
<!-- 	
		<select id="callTotalCount" statementType="CALLABLE">
    		{CALL TOTALCOUNT(#{result, mode=OUT, jdbcType=INTEGER})}
		</select> -->

	
</mapper>